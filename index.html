<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"/>
<title>數學輸入工具 - 離散數學 & 線性代數 PWA v9</title>
<meta name="theme-color" content="#151823"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<meta name="mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
<meta name="apple-mobile-web-app-title" content="離散數學鍵盤"/>
<link rel="manifest" href="manifest.json"/>
<link rel="stylesheet" href="css/styles.css?v=v9.0.0">
<!-- MathJax v3 配置：支援 bussproofs 證明樹渲染 -->
<script>
window.MathJax = {
  tex: {
    packages: {'[+]': ['bussproofs']},
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']]
  },
  loader: {load: ['[tex]/bussproofs']},
  svg: {fontCache: 'global'},
  startup: {
    pageReady: () => {
      return MathJax.startup.defaultPageReady().then(() => {
        console.log('MathJax 已載入，支援 bussproofs');
      });
    }
  }
};
</script>
<script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
</head>
<body>
<div class="app">
  <div class="brand">
    <div class="brand-title">離散數學鍵盤 <span class="brand-subtitle">LaTeX 輸入工具 [v8]</span></div>
  </div>

  <div class="input-row">
    <div class="input-wrapper">
      <div id="line-numbers" class="line-numbers"></div>
      <textarea id="input-field" placeholder="在此輸入或點擊符號按鈕..." rows="2"
                autocomplete="off" autocapitalize="off" autocorrect="off"
                inputmode="none" readonly></textarea>
    </div>
    <div class="mode-history-container">
      <select id="mode">
        <option value="latex">輸入/複製 LaTeX</option>
        <option value="unicode">輸入/複製符號</option>
        <option value="prooftree">證明樹模式</option>
        <option value="matrix">矩陣模式</option>
      </select>
      <div id="history-dropdown" class="history-dropdown" style="display: none;">
        <button id="history-toggle" class="history-toggle">歷史紀錄</button>
        <div id="history-menu" class="history-menu" style="display: none;"></div>
      </div>
    </div>
  </div>

  <div class="toolbar">
    <div class="toolbar-left">
      <button id="clear" class="btn-clear">清空</button>
      <button id="copy-latex" class="btn-secondary">📄 複製 LaTeX</button>
      <button id="copy-unicode" class="btn-primary">📋 複製符號</button>
    </div>
    <div class="toolbar-right">
      <div id="matrix-style-selector" style="display: none;">
        <label for="matrix-style">矩陣樣式：</label>
        <select id="matrix-style">
          <option value="bmatrix">[ ] 方括號</option>
          <option value="pmatrix">( ) 圓括號</option>
          <option value="vmatrix">| | 行列式</option>
          <option value="matrix">無括號</option>
        </select>
      </div>
      <div class="osk-control">
        <label for="allow-osk" title="允許使用手機內建鍵盤輸入">
          <input type="checkbox" id="allow-osk">
          <span class="osk-label">系統鍵盤</span>
        </label>
      </div>
    </div>
  </div>

  <div class="layout-grid">
    <div class="panel panel-common">
      <div class="panel-header"><span class="panel-title">常用符號</span></div>
      <div id="keys-common" class="panel-body keys-common"></div>
    </div>
    <div class="panel panel-numbers">
      <div class="panel-header"><span class="panel-title">數字區</span></div>
      <div id="keys-numbers" class="panel-body keys-numbers"></div>
    </div>
    <div class="panel panel-other">
      <div class="panel-header">
        <span class="panel-title">其他符號</span>
        <button id="toggle-other">隱藏</button>
      </div>
      <div id="keys-other" class="panel-body keys-other"></div>
    </div>
  </div>

  <!-- 錯誤提示區 -->
  <div id="error-hint" class="error-hint" style="display: none;">
    <span class="error-icon">⚠️</span>
    <span class="error-text"></span>
    <button class="error-close" onclick="document.getElementById('error-hint').style.display='none'">×</button>
  </div>

  <div class="current-content-section">
    <div class="current-content-title">當前輸入內容 (LaTeX):</div>
    <div id="render" class="current-content-display"></div>
  </div>
  <div class="panel-hint">＊點擊按鈕即可輸入對應符號。</div>

  <div class="legend-section">
    <div class="legend-title">常用符號說明</div>
    <div class="legend-item">
      <span class="key-legend">~</span>
      <p class="legend-desc"><b>否定 (Negation):</b> 將一個命題的真假值反轉。</p>
    </div>
    <div class="legend-item">
      <span class="key-legend">∧</span>
      <p class="legend-desc"><b>且 (AND):</b> 只有在兩個命題都為真時，結果才為真。</p>
    </div>
    <div class="legend-item">
      <span class="key-legend">∨</span>
      <p class="legend-desc"><b>或 (OR):</b> 只要兩個命題中有一個為真，結果就為真。</p>
    </div>
    <div class="legend-item">
      <span class="key-legend">≡</span>
      <p class="legend-desc"><b>等價 (Equivalent):</b> 兩個命題在所有情況下都具有相同的真假值。</p>
    </div>
    <div class="legend-item">
      <span class="key-legend">[ ]</span>
      <p class="legend-desc"><b>中括號:</b> 常用於表示矩陣、序列或閉區間。</p>
    </div>
    <div class="legend-item">
      <span class="key-legend">( )</span>
      <p class="legend-desc"><b>小括號:</b> 用於控制運算子的優先順序或表示函數參數。</p>
    </div>
    <div class="legend-item">
      <span class="key-legend">---</span>
      <p class="legend-desc"><b>橫線分隔符:</b> 在證明樹模式中用於分隔前提與結論。</p>
    </div>
    <div class="legend-item">
      <span class="key-legend">↵</span>
      <p class="legend-desc"><b>換行符號:</b> 在證明樹模式中用於換行輸入下一個前提。</p>
    </div>
  </div>
</div>

<script src="js/app.js?v=v9.0.0"></script>
</body>
</html>

